DROP TABLE IF EXISTS post_comments;
DROP TABLE IF EXISTS posts;

CREATE TABLE IF NOT EXISTS posts (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    name VARCHAR(512) NOT NULL,
    text_ TEXT NOT NULL,
    image_path VARCHAR(512),
    tags VARCHAR(512)[],
    like_count BIGINT NOT NULL
);

CREATE TABLE IF NOT EXISTS post_comments (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY NOT NULL,
    text_ TEXT NOT NULL,
    created_at TIMESTAMP,
    post_id BIGINT NOT NULL REFERENCES posts(id)
);

CREATE INDEX IF NOT EXISTS post_comments_on_post_id_idx ON post_comments (post_id);